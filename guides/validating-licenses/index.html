<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="initial-scale=1"><title>Validating Licenses – Guides</title><link rel="shortcut icon" href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAAF0lEQVRIx2NgGAWjYBSMglEwCkbBSAcACBAAAeaR9cIAAAAASUVORK5CYII" type="image/x-icon"><link rel="icon" href="/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180"><link href="https://keygen.sh/media.jpg" rel="image_src"><meta content="Keygen - a dead-simple product and app licensing API built for developers" property="og:title"><meta content="https://keygen.sh/" property="og:url"><meta content="Keygen is a simple app and product licensing API, allowing developers to easily implement various licensing types into any online or desktop software product." property="og:description"><meta content="https://keygen.sh/media.jpg" property="og:image"><meta content="Keygen" property="og:site_name"><meta content="website" property="og:type"><link rel="stylesheet" href="/app.css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-86857020-1', 'auto');
ga('send', 'pageview');</script></head><body><main class="guide" id="guide"><header class="guide__header"><div class="guide__sidebar-toggle" id="sidebar-toggle"><i class="material-icons">menu</i></div><div class="guide__header__background">&nbsp;</div></header><nav class="guide__sidebar"><div class="guide__sidebar__logo"><a class="logo" href="/"><canvas class="logo__logomark" width="64" height="64"></canvas><span class="logo__logotype effect--shuffle">Keygen</span></a></div><div class="guide__sidebar__content"><div class="guide__sidebar__section"><h5>Introduction</h5><ul class="guide__sidebar__list"><li class="guide__sidebar__item"><a href="/guides/getting-started">Getting Started</a></li></ul></div><div class="guide__sidebar__section"><h5>Users</h5><ul class="guide__sidebar__list"><li class="guide__sidebar__item"><a href="/guides/creating-users">Creating Users</a></li><li class="guide__sidebar__item"><a href="/guides/authenticating-users">Authentication</a></li><li class="guide__sidebar__item"><a href="/guides/storing-user-metadata">Metadata</a></li></ul></div><div class="guide__sidebar__section"><h5>Licenses</h5><ul class="guide__sidebar__list"><li class="guide__sidebar__item"><a href="/guides/creating-licenses">Creating Licenses</a></li><li class="guide__sidebar__item guide__sidebar__item--in-view"><a href="/guides/validating-licenses">Validation</a></li></ul></div><div class="guide__sidebar__section"><h5>Integrations</h5><ul class="guide__sidebar__list"><li class="guide__sidebar__item"><a href="/integrate/electron">Electron</a></li></ul></div><div class="guide__sidebar__section"><h5>Documentation</h5><ul class="guide__sidebar__list"><li class="guide__sidebar__item"><a href="/docs/api">API Reference</a></li></ul></div><div class="guide__sidebar__section"><h5>Account</h5><ul class="guide__sidebar__list"><li class="guide__sidebar__item"><a href="https://app.keygen.sh">Dashboard</a></li></ul></div></div></nav><div class="guide__content__wrapper"><div class="guide__content"><h1 id="validating-licenses">Validating Licenses</h1>
<p>Use Keygen&#39;s API and your code to validate licenses for your product.
If you need help after reading this, can reach out to us anytime at
<a href="mailto:support@keygen.sh">support@keygen.sh</a>.</p>
<p>This tutorial is written in JavaScript, but you can follow along in any
other language that you&#39;re comfortable in. Throughout this tutorial, you
will see placeholders e.g. <code>{ACCOUNT}</code> within the code examples that
will need to be replaced with your account&#39;s slug (or ID), or other
resource information.</p>
<p>Before geting started, you will either need to log into your <strong><a href="https://app.keygen.sh">Dashboard</a></strong>
and generate a <strong>product token</strong>, or generate an <strong>authentication token</strong>
via the API. To create a token directly through the API, check out the
<a href="/docs/api#tokens-generate">code examples in the API reference</a> or check
out our guide on <a href="/guides/authenticating-users">authenticating users</a>.</p>
<div class="notice notice--warning">
  <p>
    If you are using <strong>product tokens</strong>, the code for this tutorial <strong>should
    not</strong> be written client-side. If you are wanting to allow users to create
    licenses for themselves <strong>client-side</strong>, then you should <a href="/guides/authenticating-users">authenticate
    them</a> and use an authentication token
    which belongs to them; <strong>otherwise, all code should be server-side.</strong>
  </p>
  <p>
    <strong>Your admin and product tokens carry many privileges and should always
    be kept secret. Do not share your secret API tokens in publicly accessible
    areas such GitHub, embed them in client-facing code e.g. inside of your
    product, and so forth.</strong> <a href="/docs/api#authentication">Learn more.</a>
  </p>
</div>

<hr>
<p>For simplicity, we&#39;re going to be requesting a single license while
authenticated as a user. When you <a href="/docs/api/#licenses-list">list all licenses</a>
while authenticated as a user, the response will be automatically scoped
to the user you&#39;re authenticated as—that is, it will only respond with
a list of licenses that the user is associated with.</p>
<pre><code class="lang-js">const licenses = await fetch(`https://api.keygen.sh/v1/accounts/{ACCOUNT}/licenses?limit=1`, {
  method: &quot;GET&quot;,
  headers: {
    &quot;Content-Type&quot;: &quot;application/vnd.api+json&quot;,
    &quot;Accept&quot;: &quot;application/vnd.api+json&quot;,
    &quot;Authorization&quot;: &quot;Bearer {USER_TOKEN}&quot;
  }
})

const { data: [license] } = await response.json()
if (!license) {
  // User has no licenses
}
</code></pre>
<div class="notice notice--tip">
  In a real product, you may want to request and validate every license
  that a user owns to determine what the user is allowed to do within
  your product, and then save that in some type of storage so that it
  can easily be queried without additional network requests.
</div>

<hr>
<h2 id="validate-by-license">Validate by license</h2>
<p>To validate a license directly, send a <code>POST</code> request to the license&#39;s
<a href="/docs/api/#licenses-actions-validate"><code>validate</code> action</a>. Validating
a license requires an authentication token. We recommend using a token
that belongs to one of your users, but if you&#39;re validating licenses
<strong>server-side</strong>, then using an admin or product token also works.</p>
<p>The response of the validation request will be a <code>meta</code> object containing
the result of the validation: a <code>meta.valid</code> boolean, and a <code>meta.detail</code>
human-readable description of the validation result.</p>
<pre><code class="lang-js">// … above code

const validation = await fetch(`https://api.keygen.sh/v1/accounts/{ACCOUNT}/licenses/${license.id}/actions/validate`, {
  method: &quot;GET&quot;,
  headers: {
    &quot;Content-Type&quot;: &quot;application/vnd.api+json&quot;,
    &quot;Accept&quot;: &quot;application/vnd.api+json&quot;,
    &quot;Authorization&quot;: &quot;Bearer {USER_TOKEN}&quot;
  }
})

const { meta } = await validation.json()
if (meta.valid) {
  // … do something
} else {
  // … do something else
}
</code></pre>
<hr>
<h2 id="validate-by-key">Validate by key</h2>
<p>If you would rather validate a license by key, you can use the <a href="/docs/api/#licenses-actions-validate-key">validate-key</a>
action. Unlike the earlier <code>validate</code> action, this one does not require an
authentication token. This action is especially useful if you aren&#39;t using
Keygen to manage users, and would rather generate and validate license
keys directly. This is the simplest form of licensing, but is also the
least flexible and requires your users to keep track of their keys.</p>
<p>The response of the validation request will be a <code>meta</code> object containing
the result of the validation: a <code>meta.valid</code> boolean, and a <code>meta.detail</code>
human-readable description of the validation result.</p>
<pre><code class="lang-js">// … above code to request a license

const validation = await fetch(&quot;https://api.keygen.sh/v1/accounts/{ACCOUNT}/licenses/actions/validate-key&quot;, {
  method: &quot;POST&quot;,
  headers: {
    &quot;Content-Type&quot;: &quot;application/vnd.api+json&quot;,
    &quot;Accept&quot;: &quot;application/vnd.api+json&quot;
  },
  body: JSON.stringify({
    &quot;meta&quot;: {
      &quot;key&quot;: &quot;B8A5-91D7-CB9A-DAE4-4F6E-1128&quot;
    }
  })
})

const { meta } = await validation.json()
if (meta.valid) {
  // … do something
} else {
  // … do something else
}
</code></pre>
<hr>
<h2 id="next-steps">Next steps</h2>
<p>Congrats! You&#39;ve validated your first license using Keygen. If you have
any questions about what you&#39;ve learned today, <a href="mailto:support@keygen.sh">be sure to reach out</a>!</p>
</div></div><div class="zoom__wrapper"><div class="zoom"></div></div></main><script src="/app.js"></script><script src="https://s3.amazonaws.com/downloads.mailchimp.com/js/signup-forms/popup/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script></body></html>